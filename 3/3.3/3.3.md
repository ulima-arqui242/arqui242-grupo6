# 3.3. Modelo de Datos

#Decisión: Elección del modelo de datos para la aplicación móvil (exceptuando el módulo de chat)

Contexto:
El equipo de desarrollo tiene experiencia sólida con bases de datos SQL y ya ha trabajado anteriormente con consultas relacionales. La aplicación requiere almacenar información relacionada con usuarios, hábitos, y seguimiento de actividades. Se espera un volumen considerable de datos y un alto nivel de consultas relacionales para generar reportes, estadísticas de uso y notificaciones personalizadas. Por otro lado, el módulo de chat maneja un gran volumen de mensajes en tiempo real, lo que requiere un modelo de datos diferente (ya basado en una base NoSQL). La base de datos debe ser eficiente para consultas relacionales y de fácil integración con el backend existente.

Alternativas:
1. Modelo de Datos Relacional (SQL)

Base de datos relacional como PostgreSQL o MySQL.
Ideal para manejar datos estructurados y con relaciones claras entre diferentes entidades.
Permite realizar consultas complejas mediante SQL, lo cual es familiar para el equipo.
Buena escalabilidad vertical y facilidad de uso para datos transaccionales.

2. Modelo de Datos No Relacional (NoSQL)

Base de datos NoSQL como MongoDB o Couchbase.
Ideal para datos semi-estructurados o no estructurados.
Alta escalabilidad horizontal, mejor para aplicaciones que necesitan manejar grandes volúmenes de datos en paralelo.
Más flexibilidad para manejar esquemas dinámicos.
Criterios de Elección:
Experiencia del equipo de desarrollo en SQL.
Eficiencia en el manejo de datos relacionales.
Facilidad de integración con los módulos existentes (excluyendo el chat, que ya utiliza NoSQL).
Capacidad de realizar consultas complejas y generar reportes.
Escalabilidad y rendimiento para un volumen moderado de usuarios.
Decisión:
Se elige un modelo de datos relacional (SQL) para la aplicación (exceptuando el módulo de chat).

Sustento:
Dado que el equipo tiene mayor experiencia con bases de datos relacionales y consultas SQL, y el hecho de que gran parte de la información de la aplicación (usuarios, hábitos, seguimiento de actividades) requiere una estructura relacional, un modelo de datos SQL es la opción que creemos mejor. Las bases de datos relacionales ofrecen herramientas sólidas para consultas complejas y reportes, que son necesarios para el seguimiento de hábitos. Además, la integración con el backend será más directa y eficiente utilizando tecnologías que el equipo ya domina.

#Decisión: Elección del modelo de datos para el módulo de chat utilizando Cassandra (NoSQL)

Contexto:
El módulo de chat de la aplicación móvil requiere manejar un alto volumen de mensajes en tiempo real entre usuarios. La naturaleza del chat implica que los mensajes son de gran tamaño y pueden variar en estructura, además de que se espera un crecimiento exponencial de datos a medida que la base de usuarios aumenta. El equipo debe gestionar la disponibilidad y la escalabilidad del sistema, garantizando que los mensajes se almacenen y recuperen rápidamente. Se busca una solución que permita una alta concurrencia y facilidad para gestionar datos semi-estructurados.

Alternativas:
1. Modelo de Datos No Relacional (Cassandra)

Cassandra es altamente escalable y está diseñada para manejar grandes volúmenes de datos en un entorno distribuido.
Ofrece alta disponibilidad y tolerancia a fallos sin un único punto de falla.
Permite realizar operaciones de lectura y escritura en tiempo real, lo que es crucial para un módulo de chat.
La estructura de datos es flexible, ideal para manejar mensajes de chat que pueden variar en tamaño y contenido.
2. Modelo de Datos Relacional (SQL)

Utilizar una base de datos SQL (como PostgreSQL o MySQL) para el almacenamiento de mensajes.
Proporciona un enfoque estructurado y fuerte integridad referencial.
Sin embargo, podría ser un desafío escalar con un alto volumen de escritura en tiempo real.
Criterios de Elección:
Escalabilidad para manejar grandes volúmenes de mensajes y usuarios concurrentes.
Alta disponibilidad y tolerancia a fallos.
Flexibilidad en la estructura de datos para manejar diferentes tipos de mensajes.
Velocidad en las operaciones de escritura y lectura.
Capacidad de soportar una alta carga en tiempo real sin degradar el rendimiento.
Decisión:
Se elige Cassandra como la base de datos NoSQL para el módulo de chat.

Sustento:
Cassandra es la mejor elección para el modulo de chat debido a su capacidad para manejar altos volúmenes de datos en tiempo real y su arquitectura distribuida, que garantiza disponibilidad y tolerancia a fallos. Dado que el módulo de chat debe soportar una alta concurrencia y una variedad de mensajes, Cassandra proporciona la flexibilidad necesaria para adaptarse a estas necesidades. Además, su diseño optimiza las operaciones de lectura y escritura, lo que es crítico para una experiencia de usuario fluida en aplicaciones de mensajería.

#Mapeo de Recuperación de Datos: Combinación de Enfoques SQL y NoSQL
Al utilizar una combinación de enfoques SQL (para los módulos de usuarios, hábitos y seguimiento) y NoSQL (para el módulo de chat), es necesario establecer un mapeo para la recuperación de datos:

Integración de Datos:

Los mensajes del chat se almacenan en Cassandra, donde cada mensaje va a incluir los campos campos sender_id, receiver_id, message, timestamp.
La información de los usuarios, como su nombre, estado y detalles de contacto, se almacena en una base de datos relacional (SQL).
Recuperación de Datos:

Para recuperar mensajes: Se consultan directamente en Cassandra utilizando su lenguaje de consulta (CQL). Se haciendo consultas por sender_id, receiver_id y timestamp para obtener mensajes en un rango de tiempo específico.
Para recuperar información del usuario: Se utilizan consultas SQL para obtener datos de usuarios desde la base de datos relacional. Por ejemplo, para mostrar el nombre de un usuario que envió un mensaje, se realiza una consulta SQL para obtener el user_name correspondiente al sender_id.
Unificación de Resultados: Una vez obtenidos los mensajes y la información del usuario, se combinan en el frontend para mostrar el chat completo a los usuarios.
