# 7.2. Patrones de Componente y Conector

# ADR: Selección de Patrones de Componente y Conector


La arquitectura debe ser escalable, segura y mantener un rendimiento fluido, garantizando que los módulos puedan interactuar eficientemente.

---

## Decisión a Tomar
Seleccionar un patrón de componente y conector que soporte los requisitos funcionales y no funcionales del sistema.

---

## Criterios de Elección
1. **Compatibilidad con Requisitos Funcionales**  
   - Soporte para interacciones dinámicas y sincronización en tiempo real.
   - Gestión centralizada de usuarios y hábitos, y procesamiento de mensajes y eventos.
2. **Satisfacción de Atributos de Calidad**  
   - **Escalabilidad:** Incremento del 50% en usuarios y datos sin impacto significativo.
   - **Disponibilidad:** Respuesta a fallos mediante redundancia o recuperación rápida.
   - **Seguridad:** Bloqueo de accesos no autorizados y cifrado de datos.
3. **Viabilidad Técnica**  
   - Uso de React Native y Express.js según restricciones del proyecto.
   - Integración con PostgreSQL y MongoDB.
4. **Facilidad de Implementación y Mantenimiento**  
   - Modularidad para iterar y agregar funcionalidades sin afectar el núcleo.

---

## Opciones Consideradas
1. **Broker**  
   - **Ventajas:** Aislamiento entre clientes y servicios, flexibilidad para añadir o reemplazar componentes.  
   - **Desventajas:** Introduce latencia y puede ser un punto único de fallo.  

2. **Modelo-Vista-Controlador (MVC)**  
   - **Ventajas:** Separa la interfaz de usuario de la lógica de negocio, facilitando modificaciones de UI.  
   - **Desventajas:** No responde de forma eficiente a interacciones distribuidas como mensajería en tiempo real.  

3. **Pipe-and-Filter**  
   - **Ventajas:** Modularidad y reutilización de transformaciones.  
   - **Desventajas:** No es adecuado para sistemas interactivos como chats o sincronización en tiempo real.  

4. **Cliente-Servidor**  
   - **Ventajas:** Centralización del control, permite escalabilidad distribuida y simplifica la administración de recursos.  
   - **Desventajas:** Posible cuello de botella en el servidor principal.  

5. **Peer-to-Peer (P2P)**  
   - **Ventajas:** Escalabilidad horizontal, elimina dependencias en un servidor central.  
   - **Desventajas:** Complejidad técnica y desafíos en la sincronización de datos sensibles en tiempo real.  

6. **Arquitectura Orientada a Servicios (SOA)**  
   - **Ventajas:** Desacoplamiento e interoperabilidad entre componentes distribuidos.  
   - **Desventajas:** Complejidad de implementación y dependencias en middleware.  

7. **Publicar-Suscribir**  
   - **Ventajas:** Ideal para sistemas basados en eventos como notificaciones.  
   - **Desventajas:** Latencia y menor control sobre la entrega de mensajes en tiempo crítico.  

8. **Datos Compartidos**  
   - **Ventajas:** Simplifica el acceso a datos centralizados.  
   - **Desventajas:** Riesgo de cuellos de botella y alta dependencia del repositorio de datos.  

9. **Ninguno**  
   - Cuando ninguna opción satisface completamente los criterios.

---

## Decisión Final
### **Cliente-Servidor**
Este patrón ofrece una estructura clara y controlada que satisface las necesidades del proyecto:

1. **Módulo de Usuarios**  
   - Autenticación centralizada en el servidor, garantizando seguridad mediante cifrado y control de sesiones.  
   - Administración eficiente del acceso y personalización del perfil del usuario.

2. **Módulo de Hábitos**  
   - Los clientes sincronizan los datos locales de hábitos con el servidor central, permitiendo persistencia y recuperación en tiempo real.  
   - Escalabilidad para manejar múltiples usuarios accediendo simultáneamente.

3. **Módulo de Análisis**  
   - Los datos se procesan en el servidor para generar estadísticas y gráficos, enviándolos al cliente para su visualización.

4. **Módulo de Notificaciones**  
   - Centralización de la lógica de notificaciones en el servidor, que decide y envía recordatorios a los clientes.  
   - Soporte para notificaciones push con servicios distribuidos.

5. **Módulo de Amigos**  
   - El servidor gestiona la sincronización de hábitos mutuos y conexiones entre usuarios.  
   - Consultas rápidas y seguras sobre el progreso de amigos.

6. **Módulo de Mensajería**  
   - Implementación de chats mediante un servidor central para la administración de mensajes.  
   - Posibilidad de escalabilidad horizontal con múltiples servidores para manejar mensajes concurrentes.

---

## Justificación
- **Compatibilidad Funcional:** El patrón soporta la comunicación eficiente y segura entre módulos, permitiendo la sincronización de datos y la interacción en tiempo real.  
- **Atributos de Calidad:** Proporciona un marco para manejar grandes volúmenes de datos y usuarios concurrentes.  
- **Viabilidad Técnica:** Compatible con las tecnologías y bases de datos seleccionadas en el proyecto.  
- **Facilidad de Mantenimiento:** La centralización facilita actualizaciones y control sobre la lógica del sistema.

---

## Consecuencias
1. La centralización puede ser un cuello de botella en situaciones de alta demanda, mitigable mediante escalabilidad horizontal.
2. Requiere monitoreo constante para garantizar alta disponibilidad y recuperación en caso de fallos.
