# 0.6. Renzo Arroyo

# Automatización de Pruebas con Playwright

## Introducción
La automatización de pruebas es un componente importante en el desarrollo de software, ya que permite verificar de manera eficiente el correcto funcionamiento de aplicaciones web y móviles en diferentes escenarios.

## ¿Qué es Playwright?
Playwright es una herramienta de pruebas automatizadas que ofrece soporte para navegadores como Chromium, Firefox y WebKit. Creado por Microsoft, permite realizar pruebas en aplicaciones web a través de una única API que interactúa con múltiples navegadores y plataformas. A diferencia de otras herramientas como Selenium, Playwright maneja automáticamente la sincronización de eventos y es capaz de realizar pruebas con múltiples pestañas y sesiones de navegador en paralelo.

## Ventajas de Playwright
- **Compatibilidad Multinavegador**: Soporte para Chromium, Firefox y WebKit, lo que permite garantizar la compatibilidad en una amplia variedad de navegadores.
- **Pruebas en Dispositivos Móviles**: Permite la emulación de dispositivos móviles, lo cual es útil para garantizar la responsividad de las aplicaciones web.
- **Pruebas de Funcionalidad Completa**: Se puede automatizar cualquier interacción con una página, desde clics y llenado de formularios hasta acciones más complejas como el manejo de ventanas emergentes y pestañas múltiples.

## Características Clave de Playwright
1. **Navegación sin cabeza (headless)**: Las pruebas se pueden ejecutar sin necesidad de abrir una ventana gráfica, lo que acelera el proceso.
2. **Captura de pantallas y videos**: Es posible registrar y capturar la interacción de las pruebas para analizar los resultados.
3. **Manejo automático de eventos**: No es necesario sincronizar manualmente las esperas, Playwright lo hace de forma automática.
4. **Pruebas paralelas**: Facilita la ejecución de pruebas en paralelo en múltiples navegadores y dispositivos.

## Ejemplo de Uso
Para la instalación de Playwright es necesario correr los siguientes comandos en terminal:

### Para instalar Playwright:
```bash
npm install playwright
```
###Para añadir el módulo de pruebas al proyecto:
```bash
npm install @playwright/test --save-dev
```
###Para actualizarlo:
```bash
npx playwright install
```
###Para correrlo:
```bash
npx playwright test + el archivo de pruebas que quieres ejecutar. (Poner el archivo es opcional. Si solo quieres ejecutar un archivo se agrega, si quieres ejecutar todas las pruebas no lo pongas)
```
###Un ejemplo básico del uso de Playwright para la automatización de pruebas (En el ejemplo lo corrí en local por eso llevan esas url):
```javascript
const { test, expect } = require('@playwright/test');

test('Login exitoso con usuario válido', async ({ page }) => {
  // Aquí va el url desde donde va a empezar la prueba y el waitUntil sirve para hacer que espere que el navegador se cargue
  await page.goto('http://localhost:3000/login', { waitUntil: 'networkidle' });

  // Rellenar el campo de "Usuario" usando el ID correcto
  await page.fill('#Usuario', 'piero');

  // Rellenar el campo de "Contraseña"
  await page.fill('#password', '123');

  // Hacer clic en el botón "Iniciar Sesión"
  await page.click('button:has-text("Iniciar Sesión")');

  // Verificar que la URL cambie a la página del estudiante
  await expect(page).toHaveURL('http://localhost:3000/estudiante/principal');
});
```
## Importancia de las Pruebas Automatizadas
- **Reducción de Costos y Tiempo**: Al automatizar tareas repetitivas, las pruebas pueden ejecutarse rápidamente en múltiples dispositivos y plataformas, reduciendo el tiempo y los costos de pruebas manuales.
- **Detección Temprana de Errores**: Las pruebas continuas permiten detectar errores en las primeras etapas del desarrollo, evitando que lleguen a la producción.
- **Mejor Cobertura de Pruebas**: Automatizar permite ejecutar pruebas más exhaustivas en diferentes entornos, cubriendo una mayor variedad de casos y dispositivos.

## Comparación con Otras Herramientas
Playwright ofrece varias ventajas sobre herramientas similares como Selenium:
- Manejo automático de eventos.
- Mayor velocidad de ejecución en comparación con Selenium.
- Soporte más robusto para aplicaciones modernas que requieren múltiples pestañas o ventanas emergentes.

## Desafíos de la Automatización
Aunque Playwright es una herramienta potente, algunos de los desafíos a considerar son:
- **Configuración inicial**: Requiere configuraciones específicas para cada navegador o dispositivo a emular.
- **Compatibilidad móvil**: Aunque permite emular dispositivos móviles, el fuerte de Playwright es la automatización de pruebas en web, por lo que sería recomendable utilizar otra herramienta como podrían ser Appium o Detox.

## Conclusión
La automatización de pruebas con Playwright es una solución eficiente para garantizar la calidad y rendimiento de aplicaciones web en un entorno de desarrollo ágil. Su capacidad para manejar múltiples navegadores lo convierte en una opción ideal para equipos de desarrollo que buscan procesos de prueba veloces y robustos.

**Link de la demo**: [https://youtu.be/Exp7fy4Wkmo](https://youtu.be/Exp7fy4Wkmo)
